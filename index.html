<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>부산 문화·예술 행사 안내</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --primary:#0f8edc; --primary-dark:#0b5fa4; --accent:#35d3ff;
      --text:#06203a; --bg:#f4fbff; --card:#ffffff;
      font-family:"Pretendard","Noto Sans KR",sans-serif;
    }
    * { box-sizing:border-box; }
    body {
      margin:0;
      background:
        radial-gradient(circle at 15% 20%, rgba(53,211,255,.25), transparent 55%),
        radial-gradient(circle at 80% 0%, rgba(15,142,220,.25), transparent 55%),
        linear-gradient(135deg, #edf7ff 0%, #f8fbff 45%, #eef6ff 100%);
      color:var(--text);
      line-height:1.6;
      -webkit-font-smoothing:antialiased;
      position:relative;
      min-height:100vh;
      overflow-x:hidden;
    }
    body::before,
    body::after {
      content:"";
      position:fixed;
      width:520px;
      height:520px;
      border-radius:50%;
      background:radial-gradient(circle, rgba(15,142,220,.18), transparent 70%);
      z-index:-1;
      filter:blur(0);
    }
    body::before {
      top:-120px;
      left:-80px;
    }
    body::after {
      bottom:-200px;
      right:-160px;
      background:radial-gradient(circle, rgba(53,211,255,.18), transparent 70%);
    }
    body.device-mobile {
      max-width:520px;
      margin:0 auto;
      background:#0f172a;
      border:12px solid #020b1a;
      border-radius:32px;
      box-shadow:0 30px 80px rgba(0,0,0,.45);
      overflow-x:hidden;
      overflow-y:auto;
      padding:32px 0 36px;
    }
    @media (max-width:700px) {
      body.device-mobile {
        max-width:100%;
        border:none;
        border-radius:0;
        box-shadow:none;
      }
    }
    body.device-mobile::before,
    body.device-mobile::after {
      display:none;
    }
    .view-toggle {
      position:fixed;
      top:18px;
      right:24px;
      z-index:10;
      display:flex;
      gap:8px;
      padding:8px;
      border-radius:999px;
      background:rgba(255,255,255,.85);
      box-shadow:0 18px 40px rgba(7,37,63,.18);
      border:1px solid rgba(15,142,220,.12);
      backdrop-filter:blur(10px);
    }
    .view-toggle button {
      border:none;
      background:transparent;
      padding:8px 18px;
      border-radius:999px;
      font-weight:600;
      color:var(--primary-dark);
      cursor:pointer;
      transition:background-color .2s, color .2s, box-shadow .2s;
    }
    .view-toggle button.active {
      background:var(--primary);
      color:#fff;
      box-shadow:0 12px 24px rgba(15,142,220,.28);
    }
    @media (max-width:700px) {
      .view-toggle {
        position:sticky;
        margin:14px auto 0;
        justify-content:center;
        right:auto;
        top:auto;
        width:min(360px,100%);
      }
    }
    header.hero {
      position:relative;
      padding:48px clamp(24px,7vw,120px) 60px;
      min-height:55vh;
      display:flex;
      align-items:center;
      background-image:
        linear-gradient(125deg, rgba(9,56,101,.92), rgba(15,142,220,.88)),
        url("https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1600&q=80");
      background-size:cover;
      background-position:center;
      color:#fff;
      border-bottom-left-radius:48px;
      border-bottom-right-radius:48px;
      overflow:hidden;
      isolation:isolate;
      box-shadow:0 40px 120px rgba(6,32,58,.38);
    }
    body.device-mobile header.hero {
      min-height:auto;
      margin:0;
      border-radius:0;
    }
    header.hero::after {
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at 20% 20%, rgba(53,211,255,.25), transparent 45%);
      mix-blend-mode:screen;
      opacity:.7;
      pointer-events:none;
      z-index:0;
    }
    .hero .inner {
      width:100%;
      max-width:1400px;
      margin:0 auto;
      display:grid;
      grid-template-columns:minmax(320px,1.1fr) minmax(280px,.9fr);
      gap:clamp(24px,4vw,56px);
      align-items:center;
      position:relative;
      z-index:1;
    }
    .hero .inner > * { min-width:0; }
    .hero h1 {
      font-family:"Noto Sans KR","Segoe UI",system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      font-size:clamp(3rem,4.8vw,4.3rem);
      margin:.08em 0 .28em;
      font-weight:800;
      letter-spacing:.04em;
      line-height:1.08;
      text-shadow:0 14px 30px rgba(0,0,0,.4);
      word-break:keep-all;
    }
    .hero p { margin:0; opacity:.9; font-size:.98rem; }
    .hero-content {
      display:flex;
      flex-direction:column;
      gap:16px;
      max-width:780px;
    }
    .hero-content .lead {
      font-size:1.05rem;
      opacity:.92;
      max-width:620px;
    }
    .hero-cta {
      display:flex;
      flex-wrap:wrap;
      gap:14px;
      margin-top:4px;
    }
    .hero-cta .btn {
      min-width:180px;
    }
    .hero-metrics {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
      gap:14px;
      list-style:none;
      padding:0;
      margin:10px 0 0;
    }
    .hero-metrics li {
      border:1px solid rgba(255,255,255,.2);
      border-radius:18px;
      padding:14px 16px;
      background:rgba(255,255,255,.08);
      backdrop-filter:blur(8px);
      box-shadow:0 12px 30px rgba(0,0,0,.18);
    }
    .hero-metrics strong {
      display:block;
      font-size:1.8rem;
      font-weight:700;
      letter-spacing:0.02em;
    }
    .hero-metrics span {
      font-size:.88rem;
      opacity:.85;
    }
    .hero-glass {
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.2);
      border-radius:30px;
      padding:32px;
      box-shadow:0 22px 40px rgba(0,0,0,.25);
      backdrop-filter:blur(14px);
      position:relative;
      overflow:hidden;
    }
    .hero-glass::after {
      content:"";
      position:absolute;
      inset:auto -30% -50px -30%;
      height:220px;
      background:linear-gradient(90deg, rgba(255,255,255,.25), transparent);
      opacity:.4;
      transform:rotate(8deg);
      pointer-events:none;
    }
    .floating-badge {
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:8px 16px;
      border-radius:999px;
      background:rgba(15,142,220,.25);
      color:#fff;
      font-size:.85rem;
      font-weight:600;
      letter-spacing:.06em;
      text-transform:uppercase;
      margin-bottom:18px;
      animation:floatBadge 4.5s ease-in-out infinite;
    }
    @keyframes floatBadge {
      0%,100% { transform:translateY(0) translateX(0); }
      50% { transform:translateY(-6px) translateX(2px); }
    }
    .hero-pill-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
      gap:14px;
      margin:20px 0 24px;
    }
    .hero-pill {
      border-radius:20px;
      padding:14px 16px;
      background:rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.18);
      box-shadow:0 12px 26px rgba(0,0,0,.18);
    }
    .hero-pill strong {
      display:block;
      font-size:1.02rem;
    }
    .hero-pill small {
      font-size:.82rem;
      opacity:.8;
    }
    .hero-mini-list {
      display:flex;
      flex-direction:column;
      gap:10px;
      margin:0;
      padding:0;
      list-style:none;
    }
    .hero-mini-list li {
      display:flex;
      align-items:center;
      gap:10px;
      font-size:.92rem;
    }
    .hero-mini-list span {
      width:9px;
      height:9px;
      border-radius:50%;
      background:#35d3ff;
      display:inline-block;
      box-shadow:0 0 12px rgba(53,211,255,.8);
    }

    .btn {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:12px 24px;
      border-radius:999px;
      text-decoration:none;
      font-weight:600;
      border:1px solid transparent;
      cursor:pointer;
      transition:background-color .2s, color .2s, box-shadow .2s, transform .15s;
      font-size:.95rem;
      gap:6px;
    }
    .btn.primary {
      background:var(--primary);
      color:#fff;
      box-shadow:0 12px 24px rgba(15,142,220,.35);
    }
    .btn.primary:hover {
      background:var(--primary-dark);
      transform:translateY(-1px);
      box-shadow:0 16px 32px rgba(15,142,220,.4);
    }
    .btn.white {
      border:1px solid rgba(255,255,255,.7);
      color:#fff;
      background:rgba(255,255,255,.06);
    }
    .btn.white:hover {
      background:rgba(255,255,255,.16);
      transform:translateY(-1px);
    }
    main {
      padding:60px clamp(20px,5vw,100px) 100px;
      max-width:1400px;
      margin:auto;
      width:calc(100vw - clamp(40px,10vw,140px));
      position:relative;
      z-index:1;
    }
    main::before {
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at 50% -180px, rgba(15,142,220,.15), transparent 60%);
      pointer-events:none;
      z-index:-1;
    }
    main > section {
      background:rgba(255,255,255,.85);
      border-radius:32px;
      padding:36px clamp(18px,4vw,40px);
      margin-bottom:40px;
      box-shadow:0 30px 60px rgba(7,37,63,.12);
      border:1px solid rgba(15,142,220,.05);
    }
    main > section.tab-hub {
      background:transparent;
      box-shadow:none;
      padding:0;
    }
    main > section.info-ribbon {
      background:linear-gradient(135deg, rgba(15,142,220,.08), rgba(53,211,255,.18));
      border:none;
      box-shadow:0 20px 50px rgba(7,37,63,.1);
    }
    h2 {
      margin-bottom:10px;
      font-size:1.6rem;
      position:relative;
      display:inline-flex;
      align-items:center;
      gap:10px;
    }
    h2::after {
      content:"";
      display:inline-block;
      width:38px;
      height:4px;
      border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 16px rgba(53,211,255,.8);
    }
    .featured-section h2::after {
      display:none;
    }
    .card-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:24px; }
    .card {
      background:linear-gradient(180deg, rgba(255,255,255,.98), rgba(243,249,255,.92));
      border-radius:20px;
      padding:24px;
      box-shadow:0 18px 40px rgba(8,57,97,.12);
      transition:transform .25s, box-shadow .25s, border-color .25s;
      border:1px solid rgba(15,142,220,.06);
      position:relative;
      overflow:hidden;
      backdrop-filter:blur(6px);
    }
    .card::before {
      content:"";
      position:absolute;
      inset:0;
      background:radial-gradient(circle at top right, rgba(53,211,255,.16), transparent 60%);
      opacity:0;
      transition:opacity .25s;
      pointer-events:none;
    }
    .card:hover {
      transform:translateY(-6px);
      box-shadow:0 24px 60px rgba(8,57,97,.16);
      border-color:rgba(15,142,220,.14);
    }
    .card:hover::before { opacity:1; }
    .event-card .thumb {
      width:100%;
      aspect-ratio:4/3;
      border-radius:16px;
      overflow:hidden;
      margin-bottom:18px;
      background:#e8f3ff;
      box-shadow:inset 0 0 0 1px rgba(15,142,220,.08);
    }
    .event-card .thumb img {
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transition:transform .4s;
    }
    .event-card:hover .thumb img {
      transform:scale(1.05);
    }
    .tag { display:inline-block; padding:6px 16px; border-radius:999px; background:rgba(11,101,198,.12); color:var(--primary-dark); font-size:.85rem; margin-bottom:10px; }
    .meta { font-size:.9rem; color:#457; margin-bottom:12px; }
    .filters {
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      margin:24px 0 36px;
      padding:18px;
      border-radius:24px;
      background:rgba(15,142,220,.05);
      border:1px solid rgba(15,142,220,.1);
      box-shadow:inset 0 1px 0 rgba(255,255,255,.4);
    }
    .filter-btn {
      border:1px solid rgba(15,142,220,.3);
      background:rgba(15,142,220,.04);
      border-radius:999px;
      padding:10px 22px;
      cursor:pointer;
      transition:background-color .2s, color .2s, border-color .2s, transform .15s, box-shadow .15s;
      font-weight:500;
      color:var(--primary-dark);
    }
    .filter-btn:hover {
      background:rgba(15,142,220,.12);
      box-shadow:0 10px 18px rgba(8,57,97,.14);
      transform:translateY(-1px);
    }
    .filter-btn.active {
      background:var(--primary);
      color:#fff;
      border-color:var(--primary);
      box-shadow:0 12px 22px rgba(15,142,220,.35);
    }
    .info-ribbon { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:18px; margin-top:50px; background:#e5f5ff; border-radius:20px; padding:24px; }
    .tab-hub { margin-top:70px; }
    body.device-mobile main {
      padding:24px 20px 70px;
      max-width:100%;
      width:100%;
    }
    body.device-mobile main > section {
      border-radius:24px;
      padding:24px 20px;
      margin-bottom:22px;
      box-shadow:0 18px 40px rgba(3,11,28,.35);
      border:1px solid rgba(255,255,255,.08);
      background:#0e1b33;
    }
    body.device-mobile main > section.tab-hub {
      padding:0;
      background:transparent;
      box-shadow:none;
      border:none;
    }
    body.device-mobile .hero .inner {
      grid-template-columns:minmax(0,1fr);
    }
    body.device-mobile header.hero {
      text-align:center;
      justify-content:center;
      padding:26px 20px 34px;
      border-bottom-left-radius:28px;
      border-bottom-right-radius:28px;
      margin:0 18px;
    }
    body.device-mobile .hero-content {
      align-items:center;
      text-align:center;
    }
    body.device-mobile .hero-cta {
      justify-content:center;
      width:100%;
    }
    body.device-mobile .hero-cta .btn {
      flex:1 1 auto;
    }
    body.device-mobile .hero-metrics {
      text-align:left;
      grid-template-columns:repeat(2,minmax(0,1fr));
    }
    body.device-mobile .hero-glass {
      margin:0 auto;
      width:100%;
      border-radius:24px;
      padding:24px;
    }
    body.device-mobile .floating-badge {
      margin-bottom:10px;
    }
    body.device-mobile .card-grid {
      grid-template-columns:1fr;
      gap:16px;
    }
    body.device-mobile .card {
      border-radius:22px;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 16px 30px rgba(4,9,27,.55);
      background:linear-gradient(180deg, rgba(15,26,52,.9), rgba(9,17,33,.9));
      color:#f2f5ff;
    }
    body.device-mobile .card .meta,
    body.device-mobile .card p {
      color:rgba(241,246,255,.82);
    }
    body.device-mobile .filters,
    body.device-mobile .tab-buttons {
      justify-content:center;
      background:#0e1b33;
      border-radius:24px;
      border:1px solid rgba(255,255,255,.08);
      box-shadow:0 18px 38px rgba(3,10,24,.55);
    }
    body.device-mobile .tab-panel {
      background:#0d1730;
      border-radius:24px;
      border:1px solid rgba(255,255,255,.05);
      box-shadow:0 20px 40px rgba(5,13,32,.55);
      padding:26px 20px;
      margin:0 18px 24px;
    }
    body.device-mobile .timeline-grid {
      grid-template-columns:1fr;
    }
    body.device-mobile .timeline-card {
      background:#0f1c38;
      border-color:rgba(255,255,255,.05);
      box-shadow:0 16px 30px rgba(3,9,26,.55);
    }
    body.device-mobile .culture-visuals,
    body.device-mobile .culture-history,
    body.device-mobile .info-ribbon {
      margin-left:18px;
      margin-right:18px;
      background:#0e1b33;
      border-radius:24px;
      border:1px solid rgba(255,255,255,.06);
    }
    body.device-mobile .info-ribbon > div {
      color:#f2f6ff;
    }
    body.device-mobile .modal {
      align-items:flex-start;
      padding:24px 18px;
    }
    body.device-mobile .modal-card {
      width:min(420px, calc(100% - 32px));
      max-height:82vh;
      margin:32px auto 36px;
      border-radius:26px;
      padding:26px 24px;
      border:1px solid rgba(255,255,255,.12);
      background:#0e1b33;
      color:#f2f6ff;
      box-shadow:0 24px 48px rgba(3,10,24,.65);
    }
    body.device-mobile .modal-card .meta,
    body.device-mobile .modal-card p {
      color:rgba(240,246,255,.86);
    }
    body.device-mobile .detail-img {
      max-height:240px;
      border-radius:18px;
    }
    body.device-mobile .modal-card .tag {
      background:rgba(53,211,255,.22);
      color:#f5fbff;
      border:1px solid rgba(53,211,255,.35);
    }
    body.device-mobile .modal-card ul.tags li {
      background:rgba(255,255,255,.12);
      color:#f3f8ff;
      border:1px solid rgba(255,255,255,.15);
    }

    .featured-section {
      position:relative;
      overflow:hidden;
    }
    .featured-section::before,
    .featured-section::after {
      content:"";
      position:absolute;
      top:10%;
      bottom:10%;
      width:160px;
      border-radius:30px;
      background:radial-gradient(circle at center, rgba(15,142,220,.18), transparent 70%);
      z-index:0;
      filter:blur(0);
    }
    .featured-section::before {
      left:-60px;
      transform:rotate(-8deg);
    }
    .featured-section::after {
      right:-60px;
      transform:rotate(8deg);
    }
    .featured-section > * {
      position:relative;
      z-index:1;
    }
    body.device-mobile .featured-section h2,
    body.device-mobile .featured-section p {
      color:#f4f9ff;
    }
    .tab-buttons {
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:24px;
      padding:18px;
      border-radius:26px;
      background:rgba(255,255,255,.8);
      box-shadow:0 20px 40px rgba(8,57,97,.08);
      border:1px solid rgba(15,142,220,.08);
    }
    .tab-btn {
      border:1px solid rgba(15,142,220,.3);
      background:rgba(15,142,220,.04);
      color:var(--primary-dark);
      padding:10px 24px;
      border-radius:999px;
      cursor:pointer;
      font-weight:600;
      transition:background-color .2s, color .2s, border-color .2s, box-shadow .2s, transform .15s;
    }
    .tab-btn:hover {
      background:rgba(15,142,220,.12);
      transform:translateY(-1px);
      box-shadow:0 10px 18px rgba(8,57,97,.14);
    }
    .tab-btn.active {
      background:var(--primary);
      color:#fff;
      border-color:var(--primary);
      box-shadow:0 12px 22px rgba(15,142,220,.35);
    }
    .tab-panel {
      display:none;
      background:linear-gradient(180deg, rgba(255,255,255,.96), rgba(237,247,255,.95));
      border-radius:24px;
      padding:32px;
      box-shadow:0 25px 50px rgba(8,57,97,.12);
      border:1px solid rgba(15,142,220,.06);
      backdrop-filter:blur(6px);
    }
    .tab-panel.active { display:block; }
    .culture-card { display:flex; flex-direction:column; position:relative; }
    .culture-header { display:flex; flex-direction:column; gap:4px; margin-bottom:6px; }
    .culture-header h3 { margin:4px 0 0; font-size:1.15rem; }
    .culture-header .meta { font-size:.9rem; color:#4b6280; }
    .culture-card ul { padding-left:20px; margin:12px 0 0; color:#244; }
    .culture-card ul li { margin-bottom:6px; line-height:1.4; }
    .culture-history {
      margin-top:36px;
      background:linear-gradient(135deg, rgba(15,142,220,.08), rgba(53,211,255,.08));
      border-radius:28px;
      padding:30px clamp(18px,4vw,40px);
      border:1px solid rgba(8,57,97,.08);
      box-shadow:0 18px 38px rgba(8,57,97,.08);
    }
    .culture-history header {
      display:flex;
      flex-wrap:wrap;
      gap:14px;
      align-items:flex-end;
      justify-content:space-between;
      margin-bottom:24px;
    }
    .culture-history header h3 {
      margin:0;
      font-size:1.4rem;
    }
    .culture-history header p {
      margin:0;
      color:#284766;
      max-width:560px;
      font-size:.95rem;
      white-space:nowrap;
    }
    .timeline-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:20px;
    }
    .timeline-card {
      position:relative;
      padding:20px 22px 22px 26px;
      border-radius:24px;
      background:#fff;
      border:1px solid rgba(15,142,220,.08);
      box-shadow:0 20px 38px rgba(8,57,97,.12);
      overflow:hidden;
    }
    .timeline-card::before {
      content:attr(data-year);
      position:absolute;
      top:18px;
      right:22px;
      font-weight:800;
      font-size:1.4rem;
      color:rgba(15,142,220,.18);
    }
    .timeline-card strong {
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:1rem;
      color:#0b3c63;
    }
    .timeline-card strong::before {
      content:"";
      width:10px;
      height:10px;
      border-radius:50%;
      background:var(--primary);
      box-shadow:0 0 12px rgba(15,142,220,.55);
    }
    .timeline-card p {
      margin:10px 0 0;
      color:#2d4765;
      font-size:.93rem;
      line-height:1.5;
    }
    .timeline-card small {
      display:block;
      margin-top:10px;
      color:#486179;
      font-size:.85rem;
    }
    .culture-visuals {
      margin-top:36px;
      background:linear-gradient(145deg,rgba(15,142,220,.08),rgba(53,211,255,.08));
      border-radius:28px;
      padding:30px clamp(18px,4vw,40px);
      border:1px solid rgba(8,57,97,.08);
      box-shadow:0 18px 38px rgba(8,57,97,.08);
    }
    .culture-visuals header {
      display:flex;
      flex-wrap:wrap;
      gap:14px;
      align-items:flex-end;
      justify-content:space-between;
      margin-bottom:24px;
    }
    .culture-visuals header h3 {
      margin:0;
      font-size:1.4rem;
    }
    .culture-visuals header p {
      margin:0;
      color:#284766;
      max-width:560px;
      font-size:.95rem;
    }
    .culture-gallery {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:22px;
    }
    .gallery-card {
      background:#fff;
      border-radius:22px;
      padding:18px 18px 20px;
      box-shadow:0 20px 40px rgba(8,57,97,.12);
      border:1px solid rgba(15,142,220,.08);
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .gallery-thumb {
      position:relative;
      border-radius:18px;
      overflow:hidden;
      min-height:180px;
      background:#0f1824;
    }
    .gallery-thumb img {
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      transition:transform .35s ease, opacity .35s ease;
    }
    .gallery-card:hover .gallery-thumb img {
      transform:scale(1.03);
      opacity:.95;
    }
    .gallery-zoom {
      position:absolute;
      inset:auto 14px 14px auto;
      background:rgba(0,0,0,.65);
      color:#fff;
      border:none;
      border-radius:999px;
      padding:10px 18px;
      font-weight:600;
      font-size:.85rem;
      display:inline-flex;
      align-items:center;
      gap:6px;
      cursor:pointer;
      box-shadow:0 10px 18px rgba(0,0,0,.35);
      transition:background-color .2s, transform .15s;
    }
    .gallery-zoom:hover {
      background:rgba(0,0,0,.78);
      transform:translateY(-1px);
    }
    .gallery-card figcaption strong {
      display:block;
      font-size:1.05rem;
      margin-bottom:4px;
    }
    .gallery-card figcaption p {
      margin:0;
      color:#39536d;
      font-size:.92rem;
    }
    .tab-panel + .tab-panel { margin-top:24px; }
    .modal { position:fixed; inset:0; background:rgba(0,16,32,.65); display:none; align-items:center; justify-content:center; padding:20px; z-index:100; }
    .modal.open { display:flex; }
    .modal-card {
      width:min(960px,100%);
      max-height:90vh;
      overflow:auto;
      background:#fff;
      border-radius:28px;
      padding:32px;
      position:relative;
      box-shadow:0 30px 80px rgba(0,0,0,.35);
      border:1px solid rgba(15,142,220,.08);
    }
    .close-btn {
      position:absolute;
      top:18px;
      right:18px;
      border:none;
      background:#f2f4f8;
      border-radius:50%;
      width:38px;
      height:38px;
      cursor:pointer;
      font-size:20px;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:background-color .2s, transform .15s, box-shadow .15s;
    }
    .close-btn:hover {
      background:#e3e7f1;
      transform:translateY(-1px);
      box-shadow:0 8px 16px rgba(8,57,97,.18);
    }
    .detail-img { width:100%; border-radius:18px; margin-bottom:18px; object-fit:cover; max-height:320px; }
    .map-section { margin:24px 0 32px; }
    .map-section h3 { margin:0 0 6px; font-size:1.1rem; }
    .map-helper { margin:0 0 10px; font-size:.85rem; color:#4f6782; }
    #map { width:100%; height:320px; border-radius:18px; margin:0; background:#e7f1ff; overflow:hidden; }
    ul.tags { display:flex; gap:10px; flex-wrap:wrap; padding:0; list-style:none; margin:18px 0; }
    ul.tags li { padding:6px 16px; border-radius:999px; background:#eff6ff; font-size:.85rem; }
    .related { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:16px; }
    .hero .mini { letter-spacing:4px; text-transform:uppercase; opacity:.8; font-size:.9rem; }
    .image-viewer {
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.85);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:200;
      padding:20px;
    }
    .image-viewer.open { display:flex; }
    .image-viewer-inner {
      position:relative;
      max-width:min(1200px,100%);
      max-height:100%;
    }
    .image-viewer-inner img {
      display:block;
      max-width:100%;
      max-height:100vh;
      border-radius:20px;
      box-shadow:0 30px 80px rgba(0,0,0,.6);
    }
    .image-viewer .close-btn {
      background:rgba(0,0,0,.7);
      color:#fff;
    }
    @media (max-width:1200px) {
      .hero .inner {
        grid-template-columns:minmax(0,1fr);
      }
      .hero-content {
        max-width:700px;
      }
      .hero-glass {
        max-width:560px;
        margin:0 auto;
        justify-self:center;
      }
    }
    @media (max-width:900px) {
      header.hero {
        text-align:center;
        justify-content:center;
        padding:32px 20px 40px;
        min-height:45vh;
      }
      .hero .inner { justify-content:center; }
      .hero-content {
        padding:0;
        max-width:100%;
        text-align:center;
        align-items:center;
      }
      .hero-cta { justify-content:center; }
      .hero-metrics { text-align:left; }
      .hero-glass { text-align:left; }
      .hero h1 {
        white-space:normal;
        font-size:clamp(2.1rem,7vw,2.6rem);
        letter-spacing:.02em;
        line-height:1.18;
      }
    }
  </style>
  <!-- 
    ★ 카카오맵이 표시되지 않는다면:
    1. https://developers.kakao.com → 내 애플리케이션 선택
    2. "플랫폼" 탭 → "Web 플랫폼 등록" 클릭
    3. "사이트 도메인"에 GitHub Pages 주소 입력 (예: https://사용자명.github.io)
       ⚠️ 반드시 프로토콜(https://)까지 포함하여 입력하세요!
    4. 저장 후 몇 분 대기 (설정 반영까지 최대 10분 소요 가능)
    5. 브라우저 캐시 삭제 후 다시 시도
  -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=d865babc963d6edc39f7371bd8869346"></script>
</head>
<body>
  <div class="view-toggle" role="group" aria-label="화면 모드 전환">
    <button type="button" class="active" data-view="pc">PC 버전</button>
    <button type="button" data-view="mobile">모바일 버전</button>
  </div>
  <header class="hero">
    <div class="inner">
      <div class="hero-content">
        <p class="mini">Busan Culture & Arts</p>
        <h1>부산 문화/예술 행사 안내</h1>
        <p class="lead">영화, 공연, 음악, 축제, 전시까지 — 도시 곳곳의 스토리를 감각적인 UI로 모아 놓은 부산 문화 캘린더입니다.</p>
        <div class="hero-cta">
          <a class="btn primary" href="#events">행사 둘러보기</a>
          <a class="btn white" href="#culturePanel">문화 지도 보기</a>
        </div>
        <ul class="hero-metrics">
          <li>
            <strong>32+</strong>
            <span>연간 페스티벌</span>
          </li>
          <li>
            <strong>18</strong>
            <span>대표 문화공간</span>
          </li>
          <li>
            <strong>All</strong>
            <span>카테고리 필터링</span>
          </li>
        </ul>
      </div>
      <div class="hero-glass" aria-label="부산 문화 하이라이트 카드">
        <span class="floating-badge">2025 Highlight</span>
        <h3>부산 문화 하이라이트</h3>
        <p>바다, 영화, 예술이 이어지는 부산의 시그니처 라인업을 한 눈에 확인해 보세요.</p>
        <div class="hero-pill-grid">
          <div class="hero-pill">
            <strong>BIFF 2025</strong>
            <small>10.02 - 10.11 · 해운대</small>
          </div>
          <div class="hero-pill">
            <strong>부산바다축제</strong>
            <small>08.01 - 08.03 · 3대 해변</small>
          </div>
          <div class="hero-pill">
            <strong>부산비엔날레</strong>
            <small>08.17 - 10.20 · F1963</small>
          </div>
        </div>
        <ul class="hero-mini-list">
          <li><span></span>카카오맵 연동으로 행사 위치 실시간 확인</li>
          <li><span></span>카테고리 필터 & 태그로 원하는 무드를 골라보기</li>
          <li><span></span>원클릭 상세보기와 고해상도 이미지 뷰어 지원</li>
        </ul>
      </div>
    </div>
  </header>

  <main>
    <section class="featured-section" id="featuredSection">
      <h2>추천 행사</h2>
      <p>부산 시민과 여행자 모두에게 사랑받는 6개 키 행사</p>
      <div id="featured" class="card-grid"></div>
    </section>

    <section class="tab-hub" id="events">
      <div class="tab-buttons" id="tabButtons">
        <button class="tab-btn active" data-tab="culturePanel">부산 지역 문화</button>
        <button class="tab-btn" data-tab="eventPanel">부산 지역 예술 행사</button>
      </div>
      <div id="culturePanel" class="tab-panel active">
        <div id="cultureList" class="card-grid"></div>
        <section class="culture-history" aria-label="부산 지역 역사 타임라인">
          <header>
            <div>
              <h3>부산 문화 타임라인</h3>
              <p>고려·조선 시대부터 현대까지, 부산의 문화·도시 정체성을 만든 사건을 시기 순으로 정리했습니다.</p>
            </div>
            <span class="tag" style="margin-bottom:0;">Chronicle</span>
          </header>
          <div id="historyTimeline" class="timeline-grid"></div>
        </section>
        <section class="culture-visuals" aria-label="부산 지역 문화 이미지">
          <header>
            <div>
              <h3>부산 근대 문화 인포그래픽</h3>
              <p>핵심 랜드마크와 연대기 흐름을 한눈에 볼 수 있는 인포그래픽을 통해 부산의 도시 DNA를 감각적으로 확인하세요. 이미지를 클릭하면 원본 크기로 펼쳐집니다.</p>
            </div>
            <span class="tag" style="margin-bottom:0;">문화 아카이브</span>
          </header>
          <div id="cultureGallery" class="culture-gallery"></div>
        </section>
      </div>
      <div id="eventPanel" class="tab-panel">
        <div style="display:flex; justify-content:space-between; align-items:flex-end; flex-wrap:wrap; gap:16px;">
          <div>
            <h2>전체 행사 목록</h2>
            <p>카테고리를 눌러 원하는 장르만 골라보세요.</p>
          </div>
        </div>
        <div id="filters" class="filters"></div>
        <div id="eventList" class="card-grid"></div>
      </div>
    </section>

    <section class="info-ribbon">
      <div><strong>카테고리</strong><p>영화 · 공연 · 음악 · 축제 · 전시</p></div>
      <div><strong>핵심 장소</strong><p>영화의전당, 해운대, 삼락생태공원, F1963</p></div>
    </section>
  </main>

  <div id="detailModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <button class="close-btn" aria-label="닫기">×</button>
      <img id="detailImage" class="detail-img" alt="">
      <span id="detailCategory" class="tag"></span>
      <h1 id="detailTitle"></h1>
      <p id="detailMeta" class="meta"></p>
      <div id="detailDesc"></div>
      <ul id="detailTags" class="tags"></ul>
      <section id="mapSection" class="map-section">
        <h3>행사 위치 (카카오맵)</h3>       
        <div id="map">
          <!-- 앱 키를 설정하면 이 영역에 지도가 렌더링됩니다. -->
        </div>
      </section>
      <section>
        <h3 id="relatedTitle">관련 행사</h3>
        <div id="related" class="related"></div>
      </section>
    </div>
  </div>

  <div id="imageViewer" class="image-viewer" aria-hidden="true">
    <div class="image-viewer-inner">
      <button class="close-btn" aria-label="이미지 닫기">×</button>
      <img id="viewerImage" src="" alt="행사 이미지 원본 보기">
    </div>
  </div>

  <script>
    const CULTURE_SPOTS = [
      {id:"port",title:"부산항 개항장 (초량왜관~일본조계지)",period:"1876~1910",location:"중구 초량동·부평동 일대",keywords:"다문화 상업지구 · 유네스코 세계기록유산",summary:"강화도조약 이후 세계 상인이 드나든 부산 근대화의 출발점.",highlights:["1876년 개항과 함께 청·일·서양 상인 유입","초량왜관에서 일본조계지로 확장된 국제무역 거리","부산근대역사관 건물군(등록문화재 제48호 등) 보존","2023년 ‘부산개항장 기록물’ 유네스코 세계기록유산 등재"]},
      {id:"station",title:"부산역 (붉은 벽돌 역사)",period:"1905~1934",location:"동구 부산진역로 118",keywords:"근대 교통 허브 · 건축사 랜드마크",summary:"경부선 완공 이후 한반도 철도 종착지의 상징.",highlights:["1905년 경부선 완공으로 서울-부산 철도 연결","붉은 벽돌과 돔형 지붕이 돋보이는 근대 건축","등록문화재 제252호 지정","현재도 KTX·일반열차 종점, 연간 2천만 명 이용"]},
      {id:"pier",title:"부산 부두 1~3호선",period:"1910~1928",location:"중구 북항 일대",keywords:"근대 항만 인프라 · 산업문화 심장",summary:"부산이 세계무역항으로 도약한 물리적 토대.",highlights:["1호선(1910) 최초 근대식 콘크리트 부두","2·3호선(1920~28) 대형 화물선 접안","일제강점기 수출입 70%가 집중된 물류 거점","현재 일부 구조물이 산업유산 탐방 코스로 활용"]},
      {id:"park",title:"용두산공원 & 망망대",period:"1913~1920",location:"중구 용두산길 37-55",keywords:"서양식 공공공간 · 도시 조경의 시작",summary:"부산 시민 근대 휴식 문화의 출발점.",highlights:["일제 도시계획으로 조성된 최초 공원","망망대에서 부산항 전경 조망, 도시 아이덴티티 형성","1973년 부산타워로 계승되어 관광 명소화","연간 150만 명이 찾는 대표 전망 명소"]},
      {id:"nampo",title:"남포동 근대 상업거리",period:"1920~1940",location:"중구 남포동·광복로 일대",keywords:"소비·엔터테인먼트 중심지",summary:"쇼핑·극장·시장·거리공연이 결합된 생활 문화 1번지.",highlights:["미쓰코시 백화점 → 롯데백화점 광복점으로 계보","부산극장(1934) 등 영화·연극 대중화의 산실","자갈치·국제시장과 연결된 복합 상업 공간","현재 BIFF 광장, 거리 공연 문화로 계승"]},
      {id:"jagalchi",title:"자갈치 시장 (피란민 재건 문화)",period:"1945~1953",location:"중구 자갈치로 52",keywords:"생존·상생 · 다문화 재건",summary:"전쟁 속 피란민이 일군 부산의 혼과 여성 경제력의 상징.",highlights:["6·25전쟁 중 피난민이 판잣집 시장 형성","자갈치 아지매로 대표되는 여성 상인 네트워크","재일동포·중국인·미군 PX 물자까지 더한 글로컬 생태계","등록문화재 제61호, 대한민국 대표 전통시장"]}
    ];
    const CULTURE_TIMELINE = [
      {year:"1274",title:"원나라 침략군 부산 진출",detail:"고종 15년, 원나라 군대가 부산포(현 동래)에 상륙해 고려와 연합 군사기지화를 시도했습니다.",note:"고려·원 연합 작전 전초기지"},
      {year:"1407",title:"동래부 설치",detail:"조선 태종 7년, 부산포를 관할하는 동래부를 설치하며 행정·군사 중심지로 성장했습니다.",note:"부산 행정도시의 태동"},
      {year:"1592",title:"임진왜란 부산포 전투",detail:"왜군이 부산진성에 최초 상륙, 동래성 전투로 이어지며 전쟁의 도화선이 되었습니다.",note:"부산진·동래성 격전"},
      {year:"1876",title:"부산항 개항 (강화도조약)",detail:"강화도조약으로 부산항이 공식 개항하며 근대 국제무역항의 문을 열었습니다.",note:"개항장 형성과 해외 상인 유입"},
      {year:"1897",title:"부산 일본조계지 설정",detail:"일본 거류민단이 설립되어 초량·부평동 일대가 일본식 근대 도시로 재편됐습니다.",note:"다층적 도시 경관 형성"},
      {year:"1902",title:"경부선 철도 개통",detail:"부산~서울을 잇는 경부선이 개통되어 한반도 종단 교통망이 완성되었습니다.",note:"부산역, 교통 허브 부상"},
      {year:"1910",title:"부산 부두 1호선 완공",detail:"근대식 부두 건설로 대형 선박 접안이 가능해지며 국제 무역항으로 도약했습니다.",note:"항만 인프라 현대화"},
      {year:"1920",title:"부산공원(현 용두산공원) 조성",detail:"일제강점기 조성된 근대 공원으로 시민 휴식과 문화생활의 거점이 되었습니다.",note:"도심 조경 문화 확산"},
      {year:"1934",title:"부산역 신역사 준공",detail:"붉은 벽돌의 부산역이 완공되어 근대 건축의 상징이 되었습니다.",note:"등록문화재 제252호"},
      {year:"1945",title:"광복과 부산 해방",detail:"8·15 광복 후 일본인 이주민이 철수하며 한국인 중심 도시로 재편이 시작됐습니다.",note:"원도심 재정비 착수"},
      {year:"1950",title:"한국전쟁 피난수도 선포",detail:"6·25 전쟁 중 임시수도 부산으로 지정, 인구가 3배 증가하며 피란민 문화가 형성되었습니다.",note:"전국 문화가 집결"},
      {year:"1953",title:"부산항 국제여객선 취항",detail:"전후 복구 이후 국제 여객선 운항이 재개되어 재일동포 귀환과 이민 통로가 되었습니다.",note:"해외 교류 재개"},
      {year:"1963",title:"아시아영화제 개최",detail:"부산국제영화제의 전신 격인 아시아영화제가 열리며 영화 도시 이미지를 쌓았습니다.",note:"BIFF의 뿌리 형성"},
      {year:"1970",title:"해운대해수욕장 종합개발",detail:"고층 호텔과 관광시설이 들어서며 국내 대표 해양 레저 도시로 전환했습니다.",note:"마이스·관광 산업 확장"},
      {year:"1973",title:"부산 지하철 1호선 착공",detail:"국내 두 번째 지하철 공사가 시작되며 도시 교통 혁신이 추진됐습니다.",note:"1985년 1호선 개통"},
      {year:"1981",title:"부산아시아경기대회 개최",detail:"아시아드 주경기장 건설과 함께 국제 스포츠 도시 이미지를 높였습니다.",note:"대규모 스포츠 인프라"},
      {year:"1988",title:"부산시청 신청사 준공",detail:"해운대구 우동으로 이전하며 현대적 행정 중심지 기능을 강화했습니다.",note:"센텀시티 개발 촉진"},
      {year:"2002",title:"한일월드컵 부산 개최",detail:"부산아시아드주경기장을 활용해 글로벌 스포츠 도시임을 입증했습니다.",note:"글로벌 도시 브랜드"},
      {year:"2005",title:"APEC 정상회의 개최",detail:"누리마루 APEC 하우스가 건립되어 국제회의 도시로 도약했습니다.",note:"MICE 허브"},
      {year:"2014",title:"BIFF 빌리지 개관",detail:"남포동 일대에 부산국제영화제 빌리지가 조성되어 영화 콘텐츠 산업 거점이 되었습니다.",note:"영화·관광 융합"}
    ];
    const CULTURE_GALLERY = [
      {
        id:"landmark",
        title:"부산의 근대 역사적 랜드마크",
        caption:"부산항 개항장에서 남포동 상업거리까지 이어지는 5대 거점의 시대별 역할을 정리한 다이어그램.",
        thumb:"images/busan_landmark.png",
        full:"images/busan_landmark.png"
      },
      {
        id:"timeline",
        title:"부산의 주요 역사적 사건 (1274~2014)",
        caption:"원나라 정벌부터 현대 도시 도약까지, 700년 역사를 타임라인으로 구성한 연표.",
        thumb:"images/busan_history_timeline.png",
        full:"images/busan_history_timeline.png"
      }
    ];
    const IMAGE_FALLBACK = "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?auto=format&fit=crop&w=900&q=80";

    const EVENTS = [
      {id:"biff",name:"부산국제영화제(BIFF) 2025",category:"영화/축제",period:"2025.10.02 - 10.11",venue:"영화의전당 야외극장",address:"부산 해운대구 수영강변대로 120",lat:35.16308,lng:129.16038,summary:"아시아 최대 규모의 국제영화제.",description:"아시아필름마켓, 커뮤니티비프, VR 시네마 등으로 확장된 도시 전역의 영화 축제.",extra:"세계 각지의 감독과 배우, 프로그래머가 부산에 모여 신작을 소개하고, 해운대와 센텀시티 일대에서 레드카펫, 오픈토크, 시네마틱 야외 상영이 펼쳐집니다. 관객과의 대화(GV)와 마스터 클래스, 아카데미 프로그램 등 영화 교육 프로그램도 함께 운영됩니다.",image:"images/biff.jfif",tags:["국제페스티벌","해운대","아시아영화"],related:["bshort","biky","sea"]},
      {id:"bshort",name:"부산국제단편영화제",category:"영화",period:"2025.04.24 - 04.29",venue:"영화의전당 시네마테크",address:"부산 해운대구 수영강변대로 120",lat:35.1631,lng:129.1605,summary:"국내 최장수 단편 영화제, 아카데미 공인.",description:"국제·아시아 경쟁, XR 시네마, 감독·관객 GV, 워크숍 등 단편 영화 생태계 허브.",extra:"실험영화와 애니메이션, 다큐멘터리까지 폭넓게 소개하며, 차세대 감독 발굴을 위한 피칭, 멘토링 프로그램을 운영합니다. 상영 후에는 영화인과 관객이 가까운 거리에서 소통할 수 있는 포럼과 네트워킹이 이어집니다.",image:"images/biffs.png",tags:["단편영화","GV","XR"],related:["biff","indieplus"]},
      {id:"biky",name:"부산국제어린이청소년영화제(BIKY)",category:"영화",period:"2025.07.08 - 07.14",venue:"영화의전당·BNK부산은행 아트시네마",address:"부산 해운대구 수영강변대로 120",lat:35.1632,lng:129.1606,summary:"어린이·청소년이 주체가 되는 영화제.",description:"시네키즈, 레드카펫 키즈 MC, 청소년 심사단 등 참여형 프로그램으로 차세대 영화인을 양성.",extra:"아이들이 직접 심사하고 진행하는 상영 프로그램, 영화캠프, 미디어 교육 워크숍이 함께 열려 ‘어린이 영화학교’ 역할을 합니다. 가족 단위 관객을 위한 야외 상영과 체험 부스도 준비됩니다.",image:"images/biky.png",tags:["청소년","참여형","교육"],related:["biff","bnkcinema"]},
      {id:"indieplus",name:"영화의전당·인디플러스 기획전",category:"영화",period:"연중",venue:"영화의전당 인디플러스",address:"부산 해운대구 수영강변대로 120",lat:35.16315,lng:129.1604,summary:"독립·예술영화 기획전 상시 운영.",description:"지역 관객을 위한 테마 기획전, 감독과의 대화, 시나리오 북토크 등을 연중 개최.",extra:"독립영화 배급사와 협력한 특별전, 여성영화·인권영화·장르영화 등 주제 섹션이 수시로 열립니다. 상영 후에는 감독과 제작진이 참여하는 소규모 GV와 시나리오·연출 워크숍도 함께 운영됩니다.",image:"https://images.unsplash.com/photo-1485846234645-a62644f84728?auto=format&fit=crop&w=900&q=80",tags:["독립영화","기획전","GV"],related:["bshort","bnkcinema"]},
      {id:"bnkcinema",name:"BNK부산은행 아트시네마 정기 상영",category:"영화",period:"연중",venue:"BNK부산은행 아트시네마",address:"부산 중구 광복중앙로 13 3층",lat:35.0987,lng:129.0311,summary:"남포동 독립영화 전용관.",description:"국내외 예술영화, 부산 스토리 큐레이션, 감독 초청전으로 지역 영화인과 관객을 잇는다.",extra:"남포동 원도심을 기반으로 지역 감독, 부산 배경 작품을 집중 조명하며, 상영과 함께 작은 토크, 라이브 연주, 북토크가 어우러진 복합 프로그램을 선보입니다.",image:"images/art_cinema.jfif",tags:["남포동","독립영화","시사회"],related:["biky","gamcheon"]},
      {id:"rock",name:"부산국제록페스티벌",category:"음악/축제",period:"2025.08.01 - 08.03",venue:"삼락생태공원 메인스테이지",address:"부산 사상구 삼락동 29-46",lat:35.1704,lng:128.9837,summary:"국내 최장수 록 페스티벌.",description:"헤드라이너 3개 무대, 캠핑존, 지역 밴드 쇼케이스, 친환경 뮤직 페어를 함께 구성.",extra:"국내외 유명 록·메탈·인디 밴드가 대거 출연하며, 잔디 위에서 캠핑과 공연을 동시에 즐길 수 있는 ‘락캠핑존’이 인기입니다. 플리마켓과 푸드트럭, 환경 캠페인 부스가 함께 운영되어 페스티벌 분위기를 더합니다.",image:"https://images.unsplash.com/photo-1506157786151-b8491531f063?auto=format&fit=crop&w=900&q=80",tags:["록","야외","캠핑"],related:["sea","liveclub","chorus"]},
      {id:"chorus",name:"부산국제합창제",category:"음악",period:"2025.07.10 - 07.13",venue:"부산문화회관 대극장",address:"부산 남구 유엔평화로76번길 1",lat:35.1331,lng:129.1084,summary:"세계 합창단 경연 및 갈라 콘서트.",description:"마스터클래스, 시민합창단 프로젝트, 어린이 합창 캠프와 함께 세계 합창 네트워크를 만든다.",extra:"전 세계 합창단이 클래식, 민요, 현대음악 레퍼토리를 선보이며, 시민합창단과의 합동 무대, 오디션을 통한 청소년 합창 아카데미도 함께 진행됩니다.",image:"images/choir_festival.jpg",tags:["합창","클래식","갈라"],related:["classic","rock"]},
      {id:"sea",name:"부산바다축제",category:"음악/축제",period:"2025.08.01 - 08.03",venue:"해운대·광안리·송도 해수욕장",address:"부산 해운대해수욕장",lat:35.1587,lng:129.1603,summary:"해변 전역 K-POP & EDM 파티.",description:"미디어파사드, 서핑 챌린지, 나이트마켓, 친환경 캠페인을 포함한 대표 여름 축제.",extra:"오프닝 콘서트와 DJ 파티, 비치 스포츠 대회, 야간 버스킹이 여러 해수욕장에서 동시에 진행됩니다. 가족과 친구, 연인이 함께 머무르며 여름 밤바다를 즐길 수 있는 대표 바캉스 축제입니다.",image:"images/sea_festival.jpg",tags:["해변","KPOP","야간"],related:["rock","fireworks","light"]},
      {id:"classic",name:"클래식 기획 공연 시리즈",category:"음악",period:"월별",venue:"부산문화회관·시민회관·F1963",address:"부산 남구 유엔평화로76번길 1",lat:35.1331,lng:129.1084,summary:"정기 연주회·협연·실내악 페스티벌.",description:"부산문화회관, 시민회관, F1963에서 오케스트라, 실내악, 현대음악 프로그램을 릴레이로 운영.",extra:"국내외 지휘자와 솔리스트 초청 협연, 젊은 연주자를 소개하는 라이징스타 시리즈, 현대음악·크로스오버 기획까지 포함되어 클래식 팬들의 꾸준한 사랑을 받습니다.",image:"https://images.unsplash.com/photo-1529636798458-92182e662485?auto=format&fit=crop&w=900&q=80",tags:["클래식","레지던시","F1963"],related:["chorus","biennale"]},
      {id:"biennale",name:"부산비엔날레 2024",category:"전시",period:"2024.08.17 - 10.20",venue:"부산시립미술관·F1963",address:"부산 해운대구 APEC로 58",lat:35.1676,lng:129.1377,summary:"국제 현대미술제, 테마 ‘Sea of Memory’.",description:"다국적 작가 80여 명 참여, 수변 설치, 아티스트 토크, 커뮤니티 랩 프로그램으로 구성.",extra:"해양 도시 부산의 역사와 기억을 주제로 설치, 영상, 퍼포먼스가 전시되며, 작가와의 만남, 워크숍, 도시 투어 프로그램이 함께 기획됩니다.",image:"images/bieenale.jpg",tags:["현대미술","F1963","전시"],related:["artfair","photo","museum"]},
      {id:"artfair",name:"2025 유라시아부산국제아트페어",category:"전시",period:"2025.12.04 - 12.07",venue:"벡스코 제2전시장",address:"부산 해운대구 APEC로 58",lat:35.1676,lng:129.1377,summary:"국제 아트페어, 180개 갤러리.",description:"VIP 컬렉터 프로그램, 아트토크, NFT라운지, 청년작가 존, 부산 프라이즈 시상식을 운영.",extra:"국내외 유수 갤러리가 참가해 회화, 조각, 사진, 미디어아트 작품을 선보이며, 컬렉터 라운지와 아트 토크, 키즈 아트 프로그램이 운영됩니다.",image:"images/art_busan.png",tags:["아트페어","벡스코","컬렉터"],related:["biennale","photo"]},
      {id:"photo",name:"부산국제사진제",category:"전시",period:"2025.09.24 - 10.23",venue:"F1963·영화의전당 라운지",address:"부산 해운대구 수영강변대로 120",lat:35.1631,lng:129.1605,summary:"사진 전문 전시 행사.",description:"국제 큐레이터 초청전, 아티스트 토크, 포트폴리오 리뷰, 포토북 페어를 포함.",extra:"국내외 사진가들의 개인전·그룹전과 함께, 포트폴리오 리뷰, 출판사와 함께하는 포토북 마켓, 작가 강연 등이 열려 사진 작업 흐름을 한눈에 볼 수 있습니다.",image:"images/photo_festival.png",tags:["사진","큐레이션","토크"],related:["biennale","artfair"]},
      {id:"museum",name:"부산시립·현대미술관 기획전",category:"전시",period:"상시",venue:"부산시립미술관 외",address:"부산 해운대구 APEC로 58",lat:35.1641,lng:129.1373,summary:"동시대 이슈를 다루는 기획전 릴레이.",description:"시립·현대미술관에서 로컬 레지던시, 미디어아트, 어린이 미술교육 전시를 순환 개최.",extra:"지역 작가 전, 국제 공동 기획전, 어린이·청소년 대상 체험형 전시 등 다양한 층을 아우르며, 도슨트 투어와 교육 프로그램이 상시 운영됩니다.",image:"https://images.unsplash.com/photo-1469474968028-56623f02e42e?auto=format&fit=crop&w=900&q=80",tags:["공공미술관","레지던시","교육"],related:["biennale","photo"]},
      {id:"theater",name:"부산국제연극제",category:"공연",period:"2025.05.23 - 06.01",venue:"영도문화예술회관·중구 소극장",address:"부산 영도구 와치로 51",lat:35.0881,lng:129.0617,summary:"도시 전체를 무대로 하는 연극 축제.",description:"거리극, 해외 공동제작, 청년극단 쇼케이스, 국제 포럼을 운영.",extra:"항구와 원도심 골목, 공원 등 도시 곳곳을 무대로 삼아 야외극과 퍼포먼스를 선보이며, 해외 극단 초청공연과 워크숍, 연극 교육 프로그램이 함께 열립니다.",image:"images/theater_festival.jpg",tags:["연극","스트리트","포럼"],related:["dance","smallplay"]},
      {id:"dance",name:"부산국제무용제",category:"공연",period:"2025.06.04 - 06.08",venue:"해운대 해변 특설무대",address:"부산 해운대구 해운대해변로 264",lat:35.1588,lng:129.1605,summary:"바다와 함께하는 국제 무용 축제.",description:"해변 메인 공연, 워크숍, 해외 무용단 교류, 시민 플래시몹을 진행.",extra:"현대무용, 한국무용, 스트리트댄스까지 다양한 레퍼토리가 해변과 실내무대에서 펼쳐지고, 시민이 참여하는 플래시몹과 즉흥 퍼포먼스 프로그램도 마련됩니다.",image:"images/dance_festival.jpg",tags:["무용","해운대","플래시몹"],related:["theater","sea"]},
      {id:"smallplay",name:"2025 부산 소극장 연극 페스티벌",category:"공연",period:"2025.10.31 - 11.15",venue:"중구·부산진구 소극장",address:"부산 중구 비프광장로 30",lat:35.1055,lng:129.0326,summary:"지역 소극장 연합 연극제.",description:"로컬 극단 20여 팀이 신작과 리바이벌 작품을 릴레이 상연, 관객 피드백 세션 운영.",extra:"중·소극장 밀집 지역을 중심으로, 창작극·실험극·뮤지컬 등 다양한 형식의 공연이 이어지며, 공연 후에는 관객과의 대화와 워크숍이 열려 로컬 연극 생태계를 활성화합니다.",image:"images/small_theater.png",tags:["소극장","신작","관객참여"],related:["theater","gamcheon"]},
      {id:"fireworks",name:"부산불꽃축제",category:"축제",period:"2025.10.25",venue:"광안리 해변 일대",address:"부산 수영구 광안해변로 219",lat:35.1535,lng:129.1186,summary:"광안대교를 배경으로 한 대표 야간 축제.",description:"멀티미디어 불꽃 쇼, 드론 라이트 쇼, 시민 버스킹 존을 운영.",extra:"광안대교를 중심으로 음악과 연동된 대형 불꽃 연출, 드론 쇼, 레이저 쇼가 어우러지며, 해변과 인근 언덕, 선상 관람 등 다양한 명당이 형성됩니다. 축제 기간에는 공연과 체험부스, 먹거리 장터도 함께 운영됩니다.",image:"images/fireworks.jfif",tags:["불꽃","야간","광안리"],related:["sea","light"]},
      {id:"sunrise",name:"해맞이 부산 축제",category:"축제",period:"2023.12.31, 2024.01.01",venue:"해운대·송정 해수욕장",address:"부산 해운대해수욕장",lat:35.1587,lng:129.1603,summary:"새해 일출 기원 축제.",description:"새해맞이 퍼포먼스, 타종식, 소망엽서 이벤트, 따뜻한 차 나눔.",extra:"해돋이와 함께 풍물 공연, 새해 메시지 퍼포먼스, 소망 등 달기 등 참여형 이벤트가 열리며, 지역 상인들과 연계한 따뜻한 먹거리 부스가 운영됩니다.",image:"images/sunrise_festival.jpg",tags:["일출","소망","시민"],related:["sand","light"]},
      {id:"gamcheon",name:"감천문화마을 골목 축제",category:"축제",period:"2025.05.04 - 05.06",venue:"감천문화마을 일대",address:"부산 사하구 감천동 1-17",lat:35.0974,lng:129.0103,summary:"피란민 마을의 골목 예술 축제.",description:"벽화 투어, 골목 공연, 주민 플리마켓, 피란 음식 체험을 즐길 수 있다.",extra:"가파른 언덕길과 계단을 따라 골목골목을 거닐며 벽화와 설치 작품을 감상할 수 있고, 주민이 직접 운영하는 공방·카페·플리마켓에서 독특한 굿즈와 로컬 음식을 만날 수 있습니다.",image:"images/gamcheon_festival.jfif",tags:["골목","벽화","플리마켓"],related:["bnkcinema","smallplay"]},
      {id:"light",name:"해운대 빛 축제",category:"축제",period:"2025.11.30 - 2026.01.31",venue:"해운대 해변·광장",address:"부산 해운대구 해운대해변로 292",lat:35.1601,lng:129.1620,summary:"해변을 수놓는 미디어 라이트 쇼.",description:"미디어터널, 포토존, 공연, 크리스마스 마켓으로 겨울 해변을 밝힌다.",extra:"해변 산책로와 광장에 대형 트리, 미디어 터널, 포토 스팟이 조성되고, 주말마다 버스킹·합창 공연과 겨울 시즌 마켓이 함께 열립니다.",image:"images/light_festival.jpg",tags:["빛축제","포토존","겨울"],related:["fireworks","sea"]},
      {id:"sand",name:"해운대 모래축제",category:"축제",period:"2025.05.24 - 05.27",venue:"해운대 해수욕장",address:"부산 해운대해수욕장",lat:35.1589,lng:129.1604,summary:"모래 조각과 워터스포츠 축제.",description:"세계 모래조각 챔피언십, 비치런, 시티투어 연계 프로그램이 열린다.",extra:"국내외 모래조각 작가들의 대형 작품이 전시되고, 시민 참여 모래조각 체험, 비치 요가, 비치런 등 바다와 모래를 활용한 프로그램이 가득합니다.",image:"images/sand_festival.jfif",tags:["모래조각","비치","체험"],related:["sunrise","sea"]},
      {id:"chinatown",name:"부산 차이나타운 특구 문화축제",category:"축제",period:"2025.09.13 - 09.15",venue:"초량 차이나타운 특구",address:"부산 동구 초량동 1109",lat:35.1168,lng:129.0427,summary:"부산 개항장 문화와 중화권 문화를 잇는 축제.",description:"사자춤 퍼레이드, 중국 전통요리 마켓, 개항장 스탬프 투어를 제공.",extra:"중화권 전통 공연과 K-컬처가 함께 어우러지고, 거리 곳곳에서 다양한 스타일의 중식과 디저트를 맛볼 수 있는 푸드존이 운영됩니다. 개항장 일대 역사 투어와 연계 프로그램도 함께 진행됩니다.",image:"images/chinatown_festival.jfif",tags:["차이나타운","퍼레이드","미식"],related:["fireworks","gamcheon"]},
      {id:"anchovy",name:"기장 멸치축제",category:"축제",period:"2025.04.25 - 04.27",venue:"기장 대변항",address:"부산 기장군 기장읍 대변리 274-17",lat:35.2440,lng:129.2159,summary:"봄철 멸치 풍어를 기원하는 향토 축제.",description:"멸치잡이 체험, 활멸치 회&구이 시식, 어선 퍼레이드, 음악 공연을 즐길 수 있다.",extra:"대변항 포구를 따라 멸치 요리 시식 부스와 특산물 장터가 펼쳐지고, 어선 퍼레이드와 어촌 문화 체험 프로그램이 함께 열립니다. 바다를 보며 라이브 공연을 즐길 수 있는 작은 무대도 마련됩니다.",image:"images/anchovy_festival.jpg",tags:["어촌","향토","푸드"],related:["sand","sea"]}
    ];

    const featuredEl = document.getElementById("featured");
    const eventListEl = document.getElementById("eventList");
    const filtersEl = document.getElementById("filters");
    const cultureGalleryEl = document.getElementById("cultureGallery");
    const historyTimelineEl = document.getElementById("historyTimeline");
    const viewToggle = document.querySelector(".view-toggle");
    const viewToggleButtons = viewToggle ? viewToggle.querySelectorAll("button") : [];
    const VIEW_STORAGE_KEY = "busan-view-mode";
    const MOBILE_BREAKPOINT = "(max-width: 768px)";
    const mobileMediaQuery = window.matchMedia(MOBILE_BREAKPOINT);
    const isMobileUserAgent = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|Mobi/i.test(navigator.userAgent);
    let userSelectedView = false;

    function setToggleActive(mode) {
      viewToggleButtons.forEach(btn => {
        btn.classList.toggle("active", btn.dataset.view === mode);
      });
    }

    function storeViewMode(mode) {
      try {
        localStorage.setItem(VIEW_STORAGE_KEY, mode);
      } catch (err) {
        console.warn("view mode 저장 실패:", err);
      }
    }

    function applyDeviceMode(mode, { skipPersist = false } = {}) {
      if (mode === "mobile") {
        document.body.classList.add("device-mobile");
      } else {
        document.body.classList.remove("device-mobile");
        mode = "pc";
      }
      if (viewToggle) {
        setToggleActive(mode);
      }
      if (!skipPersist) {
        storeViewMode(mode);
      }
    }

    if (viewToggle) {
      viewToggle.addEventListener("click", e => {
        const target = e.target.closest("button[data-view]");
        if (!target) return;
        userSelectedView = true;
        applyDeviceMode(target.dataset.view);
      });
    }

    function handleViewportChange(e) {
      if (userSelectedView) return;
      applyDeviceMode(e.matches ? "mobile" : "pc", { skipPersist:true });
    }

    if (typeof mobileMediaQuery.addEventListener === "function") {
      mobileMediaQuery.addEventListener("change", handleViewportChange);
    } else if (typeof mobileMediaQuery.addListener === "function") {
      mobileMediaQuery.addListener(handleViewportChange);
    }

    function initViewMode() {
      let stored = null;
      try {
        stored = localStorage.getItem(VIEW_STORAGE_KEY);
      } catch (err) {
        console.warn("view mode 읽기 실패:", err);
      }
      if (stored) {
        userSelectedView = true;
      }
      const prefersMobile = mobileMediaQuery.matches || isMobileUserAgent;
      const initialMode = stored || (prefersMobile ? "mobile" : "pc");
      applyDeviceMode(initialMode, { skipPersist: Boolean(stored) });
    }

    function renderCards(data, container) {
      container.innerHTML = data.map(item => `
        <article class="card event-card">
          <div class="thumb">
            <img src="${item.image}" alt="${item.name}" onerror="this.onerror=null;this.src='${IMAGE_FALLBACK}';">
          </div>
          <span class="tag">${item.category}</span>
          <h3>${item.name}</h3>
          <p class="meta">${item.period} · ${item.venue}</p>
          <p>${item.summary}</p>
          <button class="btn primary" style="margin-top:14px;" data-type="event" data-id="${item.id}">
            자세히 보기
          </button>
        </article>`).join("");
    }

    function buildCultureGalleryCard(item) {
      return `
        <figure class="gallery-card">
          <div class="gallery-thumb">
            <img src="${item.thumb}" alt="${item.title}" onerror="this.onerror=null;this.src='${IMAGE_FALLBACK}';">
            <button class="gallery-zoom" type="button" data-view-image="${item.full}" data-view-alt="${item.title}">
              확대 보기
            </button>
          </div>
          <figcaption>
            <strong>${item.title}</strong>
            <p>${item.caption}</p>
          </figcaption>
        </figure>
      `;
    }

    function buildCultureCard(item) {
      return `
        <article class="card culture-card">
          <div class="culture-header">
            <span class="tag">부산 지역 문화</span>
            <h3>${item.title}</h3>
            <p class="meta">${item.period} · ${item.location}</p>
          </div>
          <button class="btn primary" style="margin-top:12px;" data-type="culture" data-id="${item.id}">
            자세히 보기
          </button>
        </article>
      `;
    }

    function renderCulture(containerId) {
      const target = document.getElementById(containerId);
      target.innerHTML = CULTURE_SPOTS.map(buildCultureCard).join("");
    }

    function renderCultureGallery() {
      if (!cultureGalleryEl) return;
      cultureGalleryEl.innerHTML = CULTURE_GALLERY.map(buildCultureGalleryCard).join("");
    }

    function renderHistoryTimeline() {
      if (!historyTimelineEl) return;
      historyTimelineEl.innerHTML = CULTURE_TIMELINE.map(item => `
        <article class="timeline-card" data-year="${item.year}">
          <strong>${item.title}</strong>
          <p>${item.detail}</p>
          ${item.note ? `<small>${item.note}</small>` : ""}
        </article>
      `).join("");
    }

    function initFeatured() {
      renderCards(EVENTS.slice(0,4), featuredEl);
    }

    function initFilters() {
      const categorySet = new Set();
      EVENTS.forEach(e => e.category.split("/").map(cat => cat.trim()).forEach(cat => categorySet.add(cat)));
      const cats = ["전체", ...categorySet];
      filtersEl.innerHTML = cats.map((c,i)=>`<button class="filter-btn ${i===0?"active":""}" data-cat="${c}">${c}</button>`).join("");
      filtersEl.addEventListener("click", e => {
        if (!e.target.matches(".filter-btn")) return;
        [...filtersEl.children].forEach(btn => btn.classList.remove("active"));
        e.target.classList.add("active");
        renderList(e.target.dataset.cat);
      });
    }

    function renderList(category="전체") {
      const filtered = category==="전체"
        ? EVENTS
        : EVENTS.filter(e => e.category.split("/").map(cat => cat.trim()).includes(category));
      renderCards(filtered, eventListEl);
    }

    function initTabs() {
      const buttons = document.querySelectorAll(".tab-btn");
      const panels = document.querySelectorAll(".tab-panel");
      buttons.forEach(btn => {
        btn.addEventListener("click", () => {
          buttons.forEach(b => b.classList.remove("active"));
          panels.forEach(panel => panel.classList.remove("active"));
          btn.classList.add("active");
          document.getElementById(btn.dataset.tab).classList.add("active");
        });
      });
    }

    // ★ 지도가 동작하려면 head에 선언된 Kakao SDK URL의 YOUR_KAKAO_API_KEY를 실제 앱 키로 교체하세요.
    let map, marker, infoWindow;
    function setDetailImageSource(src, altText="") {
      detailImage.onerror = () => {
        detailImage.onerror = null;
        detailImage.src = IMAGE_FALLBACK;
      };
      detailImage.src = src || IMAGE_FALLBACK;
      detailImage.alt = altText;
    }

    function openEventDetail(id) {
      const data = EVENTS.find(e => e.id === id);
      if (!data) return;
      modal.classList.add("open");
      modal.setAttribute("aria-hidden", "false");
      detailImage.style.display = "block";
      setDetailImageSource(data.image, data.name);
      detailCategory.textContent = data.category;
      detailTitle.textContent = data.name;
      detailMeta.innerHTML = `<strong>기간</strong> ${data.period} · <strong>장소</strong> ${data.venue}`;
      detailDesc.innerHTML = `
        <p>${data.description}</p>
        ${data.extra ? `<p style="margin-top:8px; color:#30445e;">${data.extra}</p>` : ""}
      `;
      detailTags.innerHTML = data.tags.map(tag=>`<li>#${tag}</li>`).join("");
      relatedTitle.textContent = "관련 행사";
      related.innerHTML = data.related.map(id=>{
        const rel = EVENTS.find(e=>e.id===id);
        return rel ? `
          <div class="card">
            <strong>${rel.name}</strong>
            <p class="meta">${rel.period}</p>
            <button class="btn primary" style="margin-top:10px;" data-type="event" data-id="${rel.id}">
              자세히 보기
            </button>
          </div>` : "";
      }).join("");

      // 카카오맵 API 확인
      if (typeof kakao === 'undefined' || !kakao.maps) {
        const mapHelper = document.getElementById("mapHelper");
        if (mapHelper) {
          mapHelper.innerHTML = `
            <strong style="color:#d32f2f;">⚠️ 카카오맵을 불러올 수 없습니다.</strong><br>
            <small style="color:#666;">
              1. 카카오 개발자 콘솔(https://developers.kakao.com)에서 <strong>JavaScript 키</strong>를 확인하세요.<br>
              2. <strong>플랫폼 설정</strong>에서 GitHub Pages 도메인을 등록하세요: <code>https://사용자명.github.io</code> (프로토콜 포함)<br>
              3. 상단 스크립트 URL의 <code>YOUR_KAKAO_API_KEY</code>를 실제 JavaScript 키로 교체하세요.<br>
              4. 변경사항이 반영되려면 몇 분이 걸릴 수 있습니다.
            </small>
          `;
          mapHelper.style.padding = "12px";
          mapHelper.style.backgroundColor = "#fff3cd";
          mapHelper.style.borderRadius = "8px";
          mapHelper.style.border = "1px solid #ffc107";
        }
        if (mapEl) {
          mapEl.innerHTML = '<div style="display:flex; align-items:center; justify-content:center; height:100%; color:#999;">지도를 불러올 수 없습니다. 위 안내를 확인하세요.</div>';
        }
        if (mapSectionEl) {
          mapSectionEl.style.display = "block";
        }
        return;
      }

      try {
        const center = new kakao.maps.LatLng(data.lat, data.lng);
        if (mapEl) {
          map = map || new kakao.maps.Map(mapEl, { center, level:4 });
          map.setCenter(center);
          if (!marker) marker = new kakao.maps.Marker({ map, position:center });
          marker.setPosition(center);
          if (!infoWindow) infoWindow = new kakao.maps.InfoWindow({ removable:false });
          infoWindow.setContent(`<div style="padding:8px 12px;">${data.venue}</div>`);
          infoWindow.open(map, marker);
        }
        if (mapSectionEl) {
          mapSectionEl.style.display = "block";
        }
      } catch (error) {
        console.error("카카오맵 초기화 오류:", error);
        const mapHelper = document.getElementById("mapHelper");
        if (mapHelper) {
          mapHelper.innerHTML = `
            <strong style="color:#d32f2f;">⚠️ 지도 로딩 중 오류가 발생했습니다.</strong><br>
            <small style="color:#666;">브라우저 콘솔(F12)에서 오류 메시지를 확인하세요. 플랫폼 도메인이 올바르게 등록되었는지 확인해주세요.</small>
          `;
          mapHelper.style.padding = "12px";
          mapHelper.style.backgroundColor = "#ffebee";
          mapHelper.style.borderRadius = "8px";
          mapHelper.style.border = "1px solid #f44336";
        }
        if (mapEl) {
          mapEl.innerHTML = '<div style="display:flex; align-items:center; justify-content:center; height:100%; color:#999;">지도 로딩 오류</div>';
        }
      }
    }

    function openImageViewer(src, altText="") {
      if (!imageViewer || !viewerImage) return;
      viewerImage.onerror = () => {
        viewerImage.onerror = null;
        viewerImage.src = IMAGE_FALLBACK;
      };
      viewerImage.src = src || IMAGE_FALLBACK;
      viewerImage.alt = altText || "이미지 확대 보기";
      imageViewer.classList.add("open");
      imageViewer.setAttribute("aria-hidden", "false");
    }

    function closeImageViewer() {
      if (!imageViewer || !viewerImage) return;
      imageViewer.classList.remove("open");
      imageViewer.setAttribute("aria-hidden", "true");
      viewerImage.src = "";
    }

    function openCultureDetail(id) {
      const data = CULTURE_SPOTS.find(c => c.id === id);
      if (!data) return;
      modal.classList.add("open");
      modal.setAttribute("aria-hidden", "false");
      // 지역 문화 카드는 상단 이미지를 사용하지 않음
      detailImage.style.display = "none";
      detailCategory.textContent = "부산 지역 문화";
      detailTitle.textContent = data.title;
      detailMeta.innerHTML = `<strong>형성 시기</strong> ${data.period} · <strong>위치</strong> ${data.location}`;
      detailDesc.textContent = data.summary;
      const tagList = (data.keywords || "")
        .split("·")
        .map(t => t.trim())
        .filter(Boolean)
        .map(tag => `<li>#${tag}</li>`)
        .join("");
      detailTags.innerHTML = tagList;
      relatedTitle.textContent = "주요 포인트";
      related.innerHTML = `
        <div class="card">
          <p class="meta">하이라이트</p>
          <p>${data.highlights.join(" · ")}</p>
        </div>
      `;
      if (mapSectionEl) {
        mapSectionEl.style.display = "none";
      }
    }

    const modal = document.getElementById("detailModal");
    const detailImage = document.getElementById("detailImage");
    const detailCategory = document.getElementById("detailCategory");
    const detailTitle = document.getElementById("detailTitle");
    const detailMeta = document.getElementById("detailMeta");
    const detailDesc = document.getElementById("detailDesc");
    const detailTags = document.getElementById("detailTags");
    const related = document.getElementById("related");
    const relatedTitle = document.getElementById("relatedTitle");
    const mapEl = document.getElementById("map");
    const mapSectionEl = document.getElementById("mapSection");
    const imageViewer = document.getElementById("imageViewer");
    const viewerImage = document.getElementById("viewerImage");

    document.body.addEventListener("click", e => {
      const btn = e.target.closest(".btn");
      if (!btn || (!btn.closest(".card") && !btn.closest(".related"))) return;
      const id = btn.dataset.id;
      const type = btn.dataset.type || "event";
      if (!id) return;
      if (type === "culture") {
        openCultureDetail(id);
      } else {
        openEventDetail(id);
      }
    });

    document.body.addEventListener("click", e => {
      const viewerTrigger = e.target.closest("[data-view-image]");
      if (!viewerTrigger) return;
      openImageViewer(viewerTrigger.dataset.viewImage, viewerTrigger.dataset.viewAlt);
    });

    modal.addEventListener("click", e => {
      if (e.target === modal || e.target.matches(".close-btn")) {
        modal.classList.remove("open");
        modal.setAttribute("aria-hidden", "true");
        return;
      }
      if (e.target === detailImage) {
        openImageViewer(detailImage.src, detailImage.alt);
      }
    });

    imageViewer.addEventListener("click", e => {
      if (e.target === imageViewer || e.target.matches(".close-btn")) {
        closeImageViewer();
      }
    });

    initViewMode();
    renderCulture("cultureList");
    renderCultureGallery();
    renderHistoryTimeline();
    initTabs();
    initFeatured();
    initFilters();
    renderList();

    // 페이지 로드 시 카카오맵 API 상태 확인
    window.addEventListener('load', () => {
      setTimeout(() => {
        if (typeof kakao !== 'undefined' && kakao.maps) {
          console.log('✅ 카카오맵 API 로드 성공! 지도 사용 가능합니다.');
        } else {
          console.error('❌ 카카오맵 API 로드 실패');
          console.log('확인 사항:');
          console.log('1. 카카오 개발자 콘솔에서 도메인 https://leejeonghun1216.github.io 등록 여부 확인');
          console.log('2. JavaScript 키가 올바르게 입력되었는지 확인');
          console.log('3. 설정 변경 후 5-10분 대기 (반영 시간 필요)');
          console.log('4. 브라우저 캐시 삭제 후 재시도');
        }
      }, 500);
    });
  </script>
</body>
</html>
